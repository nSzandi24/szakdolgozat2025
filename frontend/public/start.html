<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Nyomokra fel!</title>
	<link rel="stylesheet" href="styles/start.css">
</head>
<body>
	<aside id="leftSidebar" class="sidebar">
		<div class="sidebar-inner">
			<!-- Idő szekció -->
			<div class="sidebar-section time-section">
				<div class="time-display" id="gameTime">06:00</div>
			</div>

			<!-- Jegyzet gomb -->
			<div class="sidebar-section note-button-section">
				<button id="openNoteBtn">Jegyzet megnyitása</button>
			</div>

			<!-- Helyszínek szekció -->
			<div class="sidebar-section locations-section">
				<h3>Helyszínek</h3>
				<ul id="locationsList" class="sidebar-list">
					<li class="location-item">Otthon</li>
				</ul>
			</div>
			
			<!-- Tárgyak szekció -->
			<div class="sidebar-section items-section">
				<h3>Tárgyak és nyomok</h3>
				<ul id="itemsList" class="sidebar-list">
					<!-- Tárgyak itt jelennek meg -->
				</ul>
			</div>
		</div>
	</aside>
	<main class="game-area">
		<header>
			<button id="logoutBtn" class="logout-btn">Kijelentkezés</button>
		</header>

		<div class="content-row">
			<section id="characterImage" class="character-image">
				<!-- Karakter kép jelenik meg itt -->
			</section>

			<section id="dialogue" class="dialogue">
				<!-- Narratív szöveg jelenik meg itt, majd a choices szakasz a végén -->
				<section id="choices" class="choices">
					<!-- Választási buborékok jönnek ide -->
				</section>
			</section>
		</div>

		<div id="nextButtonContainer" class="next-button-container">
			<!-- Következő gomb ide kerül -->
		</div>

		<div class="controls">
			<!-- Location buttons will be added here by gameEngine -->
		</div>

		
		<aside id="notesPanel">
			<h3>Saját jegyzet</h3>
			<textarea id="playerNotes"></textarea>
			<div class="notes-panel-buttons">
				<button id="saveNotesBtn">Jegyzet mentése</button>
				<button id="closeNoteBtn">Bezárás</button>
			</div>
			<span id="notesSaveStatus"></span>
		</aside>
	</main>

	<script src="scripts/apiClient.js"></script>
	<script src="scripts/gameEngine.js"></script>
	<script type="module">
		import { loadTimeFromBackend } from './scripts/time.constans.js';
		document.getElementById('logoutBtn').addEventListener('click', async () => {
			try {
				await apiClient.logout();
				window.location.href = 'index.html';
			} catch (error) {
				console.error('Logout error:', error);
			}
		});
		document.addEventListener('DOMContentLoaded', function() {
			const openBtn = document.getElementById('openNoteBtn');
			const notePanel = document.getElementById('notesPanel');
			const closeBtn = document.getElementById('closeNoteBtn');
			openBtn.addEventListener('click', () => {
				notePanel.style.display = 'flex';
			});
			closeBtn.addEventListener('click', () => {
				notePanel.style.display = 'none';
				const statusSpan = document.getElementById('notesSaveStatus');
				if (statusSpan) statusSpan.textContent = '';
			});
		});
		document.addEventListener('DOMContentLoaded', () => {
			loadTimeFromBackend();
		});
	</script>
</body>
</html>

